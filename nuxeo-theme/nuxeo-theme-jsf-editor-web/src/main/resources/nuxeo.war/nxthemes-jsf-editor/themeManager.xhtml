<div xmlns="http://www.w3.org/1999/xhtml"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:nxthemes="http://nuxeo.org/nxthemes"
  xmlns:ui="http://java.sun.com/jsf/facelets">

<script type="text/javascript"><!--
window.scrollTo(0,0);
//--></script>

<div id="nxthemesThemeManager" class="nxthemesScreen">

<h1 class="nxthemesEditor">Manage themes</h1>

<table cellpadding="0" cellspacing="0" border="0">
  <tr>
    <th>theme</th>
    <th>source</th>
    <th>load theme</th>
    <th>save theme</th>
    <th>export to disk</th>
    <th>repair theme</th>
  </tr>
  <ui:repeat value="#{nxthemesUiManager.themesDescriptors}" var="theme">
    <tr>
      <td>
        <h:outputLink value="/nuxeo/nxthemes-xml-export?theme=#{theme.name}"
           rendered="#{theme.lastLoaded != null}" >#{theme.name}
        </h:outputLink>
        <h:outputText styleClass="nxthemesEmphasize"
                             rendered="#{theme.lastLoaded == null}"
                             value="LOADING FAILED" />
      </td>
      <td>#{theme.src}</td>
      <td class="action">
        <a href="javascript:void(0)" onclick="NXThemesEditor.loadTheme('#{theme.src}')">
          <h:graphicImage value="/nxthemes-jsf-editor/img/theme-reload.png" width="16" height="16"
                                    rendered="#{theme.lastLoaded != null}" />
          <h:outputText rendered="#{theme.lastLoaded != null}" value="reload" />

          <h:graphicImage value="/nxthemes-jsf-editor/img/theme-load.png" width="16" height="16"
                                    rendered="#{theme.lastLoaded == null}" />
          <h:outputText rendered="#{theme.lastLoaded == null}" value="load" />
        </a>
      </td>
      <td class="action">
        <h:outputLink value="javascript:void(0)"
            onclick="NXThemesEditor.saveTheme('#{theme.src}')"
            rendered="#{(theme.writable and theme.lastLoaded != null)}">
              <h:graphicImage value="/nxthemes-jsf-editor/img/theme-save.png" width="16" height="16" />
              <h:outputText value="save" />
        </h:outputLink>
      </td>
      <td class="action">
        <a href="/nuxeo/nxthemes-xml-export?theme=#{theme.name}&amp;download=1&amp;indent=2">
          <h:graphicImage rendered="#{theme.lastLoaded != null}"
           value="/nxthemes-jsf-editor/img/theme-download.png" width="16" height="16" />
          <h:outputText rendered="#{theme.lastLoaded != null}" value="download" />
        </a>
      </td>
      <td class="action">
        <a href="javascript:void(0)" onclick="NXThemesEditor.repairTheme('#{theme.name}')">
          <h:graphicImage value="/nxthemes-jsf-editor/img/theme-repair.png" width="16" height="16" />
          <h:outputText value="repair" />
        </a>
      </td>
    </tr>
  </ui:repeat>
</table>

</div>

</div>
