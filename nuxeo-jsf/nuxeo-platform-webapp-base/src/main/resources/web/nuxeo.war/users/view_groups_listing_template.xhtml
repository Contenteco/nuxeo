<div xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:c="http://java.sun.com/jstl/core"
     xmlns:a4j="http://richfaces.org/a4j"
     xmlns:nxd="http://nuxeo.org/nxweb/document"
     xmlns:nxh="http://nuxeo.org/nxweb/html"
     xmlns:nxu="http://nuxeo.org/nxweb/util">

  <!-- groups listing -->
  <a4j:outputPanel id="groupsListingPanel">

    <nxu:set var="listingMode" value="#{nxu:test(groupManagementActions.listingMode == 'all', 'search_only', groupManagementActions.listingMode)}">
    <nxu:set var="contentViewName" value="groups_listing_#{listingMode}">
      <ui:decorate template="/incl/content_view.xhtml">
        <ui:define name="content_view_header">
          <!-- create button -->
          <h:form rendered="#{groupManagementActions.allowCreateGroup and notReadOnly}"
            id="createGroupActionsForm">
            <div class="action_bar">
              <ul>
                <li class="selected">
                  <a4j:commandLink action="#{groupManagementActions.toggleShowCreateForm}"
                    immediate="true" id="createGroupButton" reRender="groupsPanel">
                    <h:graphicImage value="/icons/action_add_group.gif" />
                    <h:outputText value="#{messages['command.createGroup']}" />
                  </a4j:commandLink>
                </li>
              </ul>
            </div>
          </h:form>
          <div style="clear:both" />

          <ui:insert name="groups_search_method" />
        </ui:define>

        <ui:define name="pageNavigationControls" >
          <ui:include src="/pagination/a4jPageNavigationControls.xhtml">
            <ui:param name="contentIdToBeReRendered" value="#{contentViewRenderId}_resultsPanel" />
          </ui:include>
        </ui:define>
      </ui:decorate>
    </nxu:set>
    </nxu:set>

  </a4j:outputPanel>

</div>
