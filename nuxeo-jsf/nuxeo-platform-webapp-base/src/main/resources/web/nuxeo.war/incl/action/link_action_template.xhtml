<c:if test="true"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:nxh="http://nuxeo.org/nxweb/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html">

<c:if test="#{useButton}">

  <c:if test="#{not useAjaxForm}">
    <nxh:commandButton action="#{action.getLink()}"
      id="#{idPrefix}#{action.id}"
      onclick="#{action.confirm};#{action.properties.onclick};"
      immediate="#{action.immediate}"
      value="#{messages[action.label]}"
      styleClass="button #{actionStyleClass} #{action.properties.styleClass}">
      <ui:include src="/incl/action/action_icon_label_template.xhtml">
        <ui:param name="hideLabel" value="true" />
      </ui:include>
      <ui:insert name="inside_action" />
    </nxh:commandButton>
  </c:if>

  <c:if test="#{useAjaxForm}">
    <nxh:commandButton
      id="#{idPrefix}#{action.id}"
      onclick="#{action.confirm};#{action.properties.onclick};"
      immediate="#{action.immediate}"
      value="#{messages[action.label]}"
      styleClass="button #{actionStyleClass} #{action.properties.styleClass}">
      <ui:include src="/incl/action/action_icon_label_template.xhtml">
        <ui:param name="hideLabel" value="true" />
      </ui:include>
      <ui:insert name="before_action_trigger" />
      <nxu:actionListenerMethod
        value="#{action.getLink()}" />
      <ui:insert name="after_action_trigger" />
    </nxh:commandButton>
  </c:if>

</c:if>

<c:if test="#{not useButton}">

  <c:if test="#{not useAjaxForm}">
    <nxh:commandLink action="#{action.getLink()}"
      id="#{idPrefix}#{action.id}"
      onclick="#{action.confirm};#{action.properties.onclick};"
      immediate="#{action.immediate}"
      target="#{action.properties.target}"
      styleClass="actionLink #{actionStyleClass} #{action.properties.styleClass}">
      <ui:include src="/incl/action/action_icon_label_template.xhtml" />
      <ui:insert name="inside_action" />
    </nxh:commandLink>
  </c:if>

  <c:if test="#{useAjaxForm}">
    <a4j:commandLink
      id="#{idPrefix}#{action.id}"
      onclick="#{action.confirm};#{action.properties.onclick};"
      immediate="#{action.immediate}"
      styleClass="actionLink #{actionStyleClass} #{action.properties.styleClass}">
      <ui:include src="/incl/action/action_icon_label_template.xhtml" />
      <ui:insert name="before_action_trigger" />
      <nxu:actionListenerMethod
        value="#{action.getLink()}" />
      <ui:insert name="after_action_trigger" />
    </a4j:commandLink>
  </c:if>

</c:if>

</c:if>