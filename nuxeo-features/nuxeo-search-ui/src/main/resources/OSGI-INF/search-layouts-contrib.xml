<?xml version="1.0" encoding="UTF-8"?>
<component name="org.nuxeo.search.ui.layouts">

  <extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager"
    point="widgets">

    <!-- Grid layout widgets -->

    <widget name="searchPanelLeft" type="container">
      <properties widgetMode="view">
        <property name="display">block_top</property>
        <property name="hideSubLabels">true</property>
        <property name="ajaxPanelId">searchPanelLeft</property>
      </properties>
      <subWidgetRefs>
        <widget>searchForm</widget>
      </subWidgetRefs>
    </widget>

    <widget name="searchPanelRight" type="container">
      <properties widgetMode="view">
        <property name="display">block_top</property>
        <property name="hideSubLabels">true</property>
        <property name="ajaxPanelId">searchPanelRight</property>
      </properties>
      <subWidgetRefs>
        <widget>searchResults</widget>
      </subWidgetRefs>
    </widget>

    <!-- End of Grid layout widgets -->

    <!-- Main actions widgets -->

    <widget name="searchForm" type="documentActions">
      <properties widgetMode="view">
        <property name="category">SEARCH_PANEL_LEFT</property>
      </properties>
    </widget>

    <widget name="searchResults" type="documentActions">
      <properties widgetMode="view">
        <property name="category">SEARCH_PANEL_RIGHT</property>
      </properties>
      <controls mode="any">
        <control name="requireSurroundingForm">false</control>
      </controls>
    </widget>

    <!-- End of Main actions widgets -->

    <!-- Search form widgets -->

    <widget name="searchesSelector" type="template">
      <properties widgetMode="any">
        <property name="template">
          /search/widgets/searches_selector_widget_template.xhtml
        </property>
        <property name="ajaxReRender">
          searchPanelLeft searchPanelRight
        </property>
      </properties>
      <controls mode="any">
        <control name="requireSurroundingForm">true</control>
      </controls>
    </widget>

    <widget name="searchLayout" type="container">
      <handlingLabels>false</handlingLabels>
      <properties widgetMode="any">
        <property name="hideSubLabels">true</property>
      </properties>
      <controls mode="any">
        <control name="requireSurroundingForm">true</control>
        <property name="useAjaxForm">true</property>
      </controls>
      <subWidgetRefs>
        <widget>searchActions</widget>
        <widget>searchFilters</widget>
        <widget>searchActions</widget>
      </subWidgetRefs>
    </widget>

    <widget name="searchFilters" type="contentViewSearchLayout">
      <properties widgetMode="any">
        <property name="contentViewName">#{searchUIActions.currentContentViewName}</property>
      </properties>
    </widget>

    <widget name="searchActions" type="documentActions">
      <properties widgetMode="any">
        <property name="category">SEARCH_FILTER_ACTIONS</property>
        <property name="actionsDisplay">buttons</property>
        <property name="actionStyleClass">button</property>
        <property name="overallDisplay">horizontal_block</property>
        <property name="hideSubLabels">true</property>
        <property name="styleClass">searchFilterActions</property>
      </properties>
    </widget>

    <!-- End of Search form widgets -->

    <!-- Search results widgets -->

    <widget name="searchResultsActions" type="documentActionsWithForms">
      <properties widgetMode="view">
        <property name="category">SEARCH_RESULTS_ACTIONS</property>
        <property name="styleClass">globalActionBar</property>
        <property name="overallDisplay">horizontal_block</property>
        <property name="actionStyleClass">button</property>
        <property name="actionsDisplay">buttons</property>
        <property name="useAjaxForm">true</property>
        <property name="ignoreTemplateProperty">true</property>
        <property name="maxActionsNumber">3</property>
      </properties>
    </widget>

    <widget name="searchNxqlInput" type="template">
      <properties widgetMode="any">
        <property name="template">
          /search/widgets/search_nxql_input_widget_template.xhtml
        </property>
        <property name="ajaxReRender">
          searchPanelRight
        </property>
      </properties>
      <controls mode="any">
        <control name="requireSurroundingForm">true</control>
      </controls>
    </widget>

    <widget name="searchContentView" type="contentViewWithForms">
      <properties widgetMode="any">
        <property name="contentViewName">#{searchUIActions.currentContentViewName}</property>
        <property name="showFilterForm">false</property>
        <property name="useAjaxForm">true</property>
        <property name="useAjaxPagination">true</property>
        <property name="styleClass">alignL</property>
      </properties>
    </widget>

    <!-- End of Search results widgets -->

  </extension>

  <extension target="org.nuxeo.ecm.platform.actions.ActionService"
    point="actions">

    <!-- Search form -->

    <action id="searchesSelector" type="widget" order="100">
      <category>SEARCH_PANEL_LEFT</category>
      <properties>
        <property name="widgetName">searchesSelector</property>
      </properties>
    </action>

    <action id="searchLayout" type="widget" order="200">
      <category>SEARCH_PANEL_LEFT</category>
      <properties>
        <property name="widgetName">searchLayout</property>
      </properties>
      <filter-id>notNxqlSearchSelected</filter-id>
    </action>

    <!-- End Search form -->

    <!-- Search results -->

    <action id="searchResultsActions" type="widget" order="100">
      <category>SEARCH_PANEL_RIGHT</category>
      <properties>
        <property name="widgetName">searchResultsActions</property>
      </properties>
    </action>

    <action id="searchNxqlInput" type="widget" order="200">
      <category>SEARCH_PANEL_RIGHT</category>
      <properties>
        <property name="widgetName">searchNxqlInput</property>
      </properties>
      <filter-id>nxqlSearchSelected</filter-id>
    </action>

    <action id="searchContentView" type="widget" order="300">
      <category>SEARCH_PANEL_RIGHT</category>
      <properties>
        <property name="widgetName">searchContentView</property>
      </properties>
    </action>

    <!-- End Search results -->

  </extension>

  <extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager"
    point="layouts">

    <layout name="gridSearchLayout">
      <templates>
        <template mode="any">
          /layouts/layout_grid_template.xhtml
        </template>
      </templates>
      <rows>
        <row>
          <properties mode="any">
            <property name="nxl_gridStyleClass_0">gridStyle2 compactLayout nxSearchForm</property>
            <property name="nxl_gridStyleClass_1">gridStyle6 nxSearchResults</property>
          </properties>
          <widget>searchPanelLeft</widget>
          <widget>searchPanelRight</widget>
        </row>
      </rows>
    </layout>

    <layout name="search_listing_ajax">
      <templates>
        <template mode="any">
          /layouts/layout_listing_ajax_template.xhtml
        </template>
        <template mode="csv">
          /layouts/layout_listing_csv_template.xhtml
        </template>
        <template mode="pdf">
          /layouts/layout_listing_pdf_template.xhtml
        </template>
        <template mode="edit_columns">
          /layouts/layout_column_selection_template.xhtml
        </template>
        <template mode="edit_sort_infos">
          /layouts/layout_sort_infos_template.xhtml
        </template>
        <template mode="edit_sort_infos_map">
          /layouts/layout_sort_infos_template.xhtml
        </template>
      </templates>
      <properties mode="any">
        <property name="showListingHeader">true</property>
        <property name="showRowEvenOddClass">true</property>
      </properties>
      <properties mode="edit_columns">
        <property name="availableElementsLabel">
          label.selection.availableColumns
        </property>
        <property name="selectedElementsLabel">
          label.selection.selectedColumns
        </property>
        <property name="selectedElementsHelp"></property>
        <property name="selectSize">10</property>
        <property name="required">true</property>
        <property name="displayAlwaysSelectedColumns">false</property>
      </properties>
      <columns>
        <column name="selection" alwaysSelected="true">
          <properties mode="any">
            <property name="isListingSelectionBox">true</property>
            <property name="useFirstWidgetLabelAsColumnHeader">false</property>
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <properties mode="csv">
            <property name="isHidden">true</property>
          </properties>
          <properties mode="pdf">
            <property name="isHidden">true</property>
          </properties>
          <widget>listing_ajax_selection_box</widget>
        </column>
        <column name="icon_type">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">false</property>
            <property name="columnStyleClass">iconColumn</property>
            <property name="label">label.selection.column.icon_type</property>
          </properties>
          <widget>listing_icon_type</widget>
        </column>
        <column name="title_link">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:title</property>
            <property name="label">label.selection.column.title_link</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_title_link</widget>
        </column>
        <column name="lock">
          <properties mode="any">
            <property name="columnStyleClass">iconColumn</property>
            <property name="label">label.selection.column.lock</property>
          </properties>
          <properties mode="csv">
            <property name="isHidden">true</property>
          </properties>
          <properties mode="pdf">
            <property name="isHidden">true</property>
          </properties>
          <widget>listing_lock_icon</widget>
        </column>
        <column name="modification_date">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:modified</property>
            <property name="label">label.content.header.modified</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_modification_date</widget>
        </column>
        <column name="lastContributor">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:lastContributor</property>
            <property name="label">
              label.content.header.lastContributor
            </property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_last_contributor</widget>
        </column>
        <column name="version">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="label">label.version</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_version</widget>
        </column>
        <column name="lifecycle">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">
              ecm:currentLifeCycleState
            </property>
            <property name="label">
              label.content.header.currentLifecycleState
            </property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_lifecycle</widget>
        </column>
        <column name="livedit_link">
          <properties mode="any">
            <property name="columnStyleClass">iconColumn</property>
            <property name="label">
              label.selection.column.livedit_link
            </property>
          </properties>
          <properties mode="csv">
            <property name="isHidden">true</property>
          </properties>
          <properties mode="pdf">
            <property name="isHidden">true</property>
          </properties>
          <widget>listing_livedit_link</widget>
        </column>
        <column name="description" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:description</property>
            <property name="label">description</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_description</widget>
        </column>
        <column name="nature" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:nature</property>
            <property name="label">label.dublincore.nature</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_nature</widget>
        </column>
        <column name="subjects" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="label">label.dublincore.subject</property>
          </properties>
          <widget>listing_subjects</widget>
        </column>
        <column name="rights" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:rights</property>
            <property name="label">label.dublincore.rights</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_rights</widget>
        </column>
        <column name="source" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:source</property>
            <property name="label">label.dublincore.source</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_source</widget>
        </column>
        <column name="coverage" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:coverage</property>
            <property name="label">label.dublincore.coverage</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_coverage</widget>
        </column>
        <column name="creation_date" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:created</property>
            <property name="label">label.dublincore.created</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_creation_date</widget>
        </column>
        <column name="format" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:format</property>
            <property name="label">label.dublincore.format</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_format</widget>
        </column>
        <column name="language" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:language</property>
            <property name="label">label.dublincore.language</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_language</widget>
        </column>
        <column name="expired_date" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:expired</property>
            <property name="label">label.dublincore.expired</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_expiration_date</widget>
        </column>
        <column name="contributors" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="label">label.dublincore.contributors</property>
          </properties>
          <widget>listing_contributors</widget>
        </column>
      </columns>
    </layout>

  </extension>

</component>
