<?xml version="1.0"?>

<component name="org.nuxeo.ecm.platform.uidgen.service.UIDGeneratorService">
  <documentation>
    Help to generate unique IDs needed in different situations. The principal
    scope is to generate UIDs which are external references for Documents. The
    UIDs formats are defined by extensions to this component and are based on a
    unique number provided by this component on a specific key given by a
    generator

    @version 1.0
    @author <a href="mailto:dm@nuxeo.com">Dragos Mihalache</a>
  </documentation>

  <implementation
    class="org.nuxeo.ecm.platform.uidgen.service.UIDGeneratorService" />

  <extension-point name="sequencerFactory">
    <documentation>
      The class implementing UIDSequencerFactory to use as a sequencer factory.
      <code>
        <className>org.nuxeo.ecm.platform.uidgen.ejb.EjbSequencerFactory</className>
      </code>
    </documentation>
    <!-- no XObject, className is parsed using DOM calls -->
  </extension-point>

  <extension-point name="generators">
    <documentation>
      The extension point provided by this component gives the possibility to
      register generators. A generator should be an implementation of
      <pre>org.nuxeo.ecm.platform.uidgen.UIDGenerator</pre>
      or a subclass of
      <pre>org.nuxeo.ecm.platform.uidgen.AbstractUIDGenerator</pre>.
    </documentation>

    <object
      class="org.nuxeo.ecm.platform.uidgen.service.UIDGeneratorDescriptor" />
  </extension-point>

  <require>org.nuxeo.ecm.core.listener.CoreEventListenerService</require>
  <extension target="org.nuxeo.ecm.core.listener.CoreEventListenerService"
    point="listener">
    <listener name="uidlistener"
      class="org.nuxeo.ecm.platform.uidgen.corelistener.DocUIDGeneratorListener"
      order="10">
      <eventId>documentCreated</eventId>
    </listener>
  </extension>

</component>
