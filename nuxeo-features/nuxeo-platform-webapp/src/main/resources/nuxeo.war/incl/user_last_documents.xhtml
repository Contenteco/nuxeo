<div xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:t="http://myfaces.apache.org/tomahawk"
  xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
  xmlns:nxf="http://nuxeo.org/nxweb/function"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:nxd="http://nuxeo.org/nxweb/document">
  <t:div rendered="${!empty documents}">
    <nxu:dataTable id="#{idParam}" value="#{documents}" var="doc" preserveSort="true"
      preserveDataModel="false" rowClasses="dataRowEven,dataRowOdd"
      sortable="false" styleClass="dataList">

      <!-- Icon + Type -->
      <nxu:column styleClass="iconColumn">
        <div id="docRef:#{doc.ref}" class="cell">
         <h:graphicImage value="/icons/lock.gif"
           rendered="#{not empty doc.lock}"/>
        <nxu:graphicImage
          value="#{nxd:iconPath(doc)}" alt="#{doc.type}" /></div>
        <script type="text/javascript">
          <h:outputText
            value="new Draggable('docRef:#{doc.ref}', {revert:true});"/>
          <h:outputText rendered="#{doc.folder}"
            value="Droppables.add('docRef:#{doc.ref}', {accept:'cell', onDrop:function(element){moveElement(element,'docRef:#{doc.ref}')}, hoverclass:'dropInto'});"/>
        </script>
      </nxu:column>

      <!--  Title -->
      <nxu:column>
        <f:facet name="header">
        <h:panelGroup>
          <h:commandLink immediate="true" action="#{sortActions.repeatSearch}"
            rendered="#{provider.sortable}" >
          <h:outputText value="#{messages['label.content.header.title']}" />
          <f:param name="providerName" value="#{providerName}" />
          <f:param name="sortColumn" value="dc:title" />
          <h:panelGroup rendered="#{provider.sortInfo.sortColumn == 'dc:title'}" >
            <h:graphicImage value="/icons/arrow_down.gif"
              rendered="#{provider.sortInfo.sortAscending}" />
            <h:graphicImage value="/icons/arrow_up.gif"
              rendered="#{!provider.sortInfo.sortAscending}" />
          </h:panelGroup>
        </h:commandLink>
        <h:outputText value="#{messages['label.content.header.title']}"
          rendered="#{!provider.sortable}" />
        </h:panelGroup>
        </f:facet>

        <nxd:restDocumentLink title="#{nxd:titleOrId(doc)}" document="#{doc}">
          <h:outputText value="#{nxd:titleOrId(doc)}" />
        </nxd:restDocumentLink>
      </nxu:column>

      <!-- Workspace -->
      <nxu:column>
        <f:facet name="header">
        <h:panelGroup>
          <h:outputText value="#{messages['label.content.header.workspace']}" />
        </h:panelGroup>
        </f:facet>

        <h:outputText value="workspace machin" />
      </nxu:column>

      <!--  Modification date -->
      <nxu:column>
        <f:facet name="header">
        <h:panelGroup>
          <h:commandLink immediate="true" action="#{sortActions.repeatSearch}"
            rendered="#{provider.sortable}" >
          <h:outputText value="#{messages['label.content.header.modified']}" />
          <f:param name="providerName" value="#{providerName}" />
          <f:param name="sortColumn" value="dc:modified" />
          <h:panelGroup rendered="#{provider.sortInfo.sortColumn == 'dc:modified'}" >
            <h:graphicImage value="/icons/arrow_down.gif"
              rendered="#{provider.sortInfo.sortAscending}" />
            <h:graphicImage value="/icons/arrow_up.gif"
              rendered="#{!provider.sortInfo.sortAscending}" />
          </h:panelGroup>
        </h:commandLink>
        <h:outputText value="#{messages['label.content.header.modified']}"
          rendered="#{!provider.sortable}" />
        </h:panelGroup>
        </f:facet>

        <h:outputText value="#{doc.dublincore.modified}">
          <f:convertDateTime pattern="#{nxu:basicDateAndTimeFormater()}" />
        </h:outputText>
      </nxu:column>
    </nxu:dataTable>

  </t:div>

</div>
