<span xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:nxh="http://nuxeo.org/nxweb/html"
  xmlns:nxd="http://nuxeo.org/nxweb/document"
  xmlns:nxdir="http://nuxeo.org/nxdirectory"
  xmlns:t="http://myfaces.apache.org/tomahawk">

  <!-- Title -->
  <nxu:column rendered="#{field.prefixedName == 'dc:title'}" >
    <f:facet name="header">
      <h:panelGroup>
      <h:commandLink immediate="true" action="#{searchResults.repeatSearch}"
          rendered="#{provider.sortable}" >
        <h:outputText value="#{messages[field.label]}" />
        <f:param name="providerName" value="#{providerName}" />
        <f:param name="sortColumn" value="#{field.prefixedName}" />
        <h:panelGroup rendered="#{provider.sortInfo.sortColumn == field.prefixedName}" >
          <h:graphicImage value="/icons/arrow_down.gif"
            rendered="#{provider.sortInfo.sortAscending}" />
          <h:graphicImage value="/icons/arrow_up.gif"
            rendered="#{!provider.sortInfo.sortAscending}" />
        </h:panelGroup>
      </h:commandLink>
      <h:outputText value="#{messages[field.label]}"
        rendered="#{!provider.sortable}" />
    </h:panelGroup>
    </f:facet>

    <nxd:restDocumentLink document="#{doc}">
     <nxh:outputText value="#{nxd:titleOrId(doc)}"/>
    </nxd:restDocumentLink>
  </nxu:column>

  <!-- lifecycle state -->
  <nxu:column rendered="#{field.prefixedName == 'ecm:currentLifeCycleState'}" >
    <f:facet name="header">
      <h:panelGroup>
      <h:commandLink immediate="true" action="#{searchResults.repeatSearch}"
          rendered="#{provider.sortable}" >
        <h:outputText value="#{messages[field.label]}" />
        <f:param name="providerName" value="#{providerName}" />
        <f:param name="sortColumn" value="#{field.prefixedName}" />
        <h:panelGroup rendered="#{provider.sortInfo.sortColumn == field.prefixedName}" >
          <h:graphicImage value="/icons/arrow_down.gif"
            rendered="#{provider.sortInfo.sortAscending}" />
          <h:graphicImage value="/icons/arrow_up.gif"
            rendered="#{!provider.sortInfo.sortAscending}" />
        </h:panelGroup>
      </h:commandLink>
      <h:outputText value="#{messages[field.label]}"
        rendered="#{!provider.sortable}" />
    </h:panelGroup>
    </f:facet>

    <h:outputText value="#{messages[doc.currentLifeCycleState]}" />

  </nxu:column>

  <!-- primary type -->
  <nxu:column rendered="#{field.prefixedName == 'ecm:primaryType'}" >
    <f:facet name="header">
      <h:panelGroup>
      <h:commandLink immediate="true" action="#{searchResults.repeatSearch}"
          rendered="#{provider.sortable}" >
        <h:outputText value="#{messages[field.label]}" />
        <f:param name="providerName" value="#{providerName}" />
        <f:param name="sortColumn" value="#{field.prefixedName}" />
        <h:panelGroup rendered="#{provider.sortInfo.sortColumn == field.prefixedName}" >
          <h:graphicImage value="/icons/arrow_down.gif"
            rendered="#{provider.sortInfo.sortAscending}" />
          <h:graphicImage value="/icons/arrow_up.gif"
            rendered="#{!provider.sortInfo.sortAscending}" />
        </h:panelGroup>
      </h:commandLink>
      <h:outputText value="#{messages[field.label]}"
        rendered="#{!provider.sortable}" />
    </h:panelGroup>
    </f:facet>

    <h:outputText value="#{messages[nxd:typeInfo(row.data).label]}" />

  </nxu:column>

</span>
